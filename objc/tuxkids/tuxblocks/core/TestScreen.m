//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: C:\Users\Thomas\Documents\Eclipse\Tux\tuxblocks\core\src\main\java\tuxkids\tuxblocks\core\TestScreen.java
//
//  Created by Thomas on 7/1/13.
//

#import "java/lang/Math.h"
#import "playn/core/CanvasImage.h"
#import "playn/core/Color.h"
#import "playn/core/Graphics.h"
#import "playn/core/GroupLayer.h"
#import "playn/core/Image.h"
#import "playn/core/ImageLayer.h"
#import "playn/core/Layer.h"
#import "playn/core/util/Clock.h"
#import "tripleplay/game/Screen.h"
#import "tripleplay/game/ScreenStack.h"
#import "tripleplay/util/Colors.h"
#import "tuxkids/tuxblocks/core/GameState.h"
#import "tuxkids/tuxblocks/core/ImageLayerTintable.h"
#import "tuxkids/tuxblocks/core/TestScreen.h"
#import "tuxkids/tuxblocks/core/screen/GameScreen.h"
#import "tuxkids/tuxblocks/core/utils/CanvasUtils.h"

@implementation TBTestScreen

@synthesize tint = tint_;
- (id<PlaynCoreImageLayer>)l1 {
  return l1_;
}
- (void)setL1:(id<PlaynCoreImageLayer>)l1 {
  JreOperatorRetainedAssign(&l1_, self, l1);
}
@synthesize l1 = l1_;
- (TBImageLayerTintable *)l2 {
  return l2_;
}
- (void)setL2:(TBImageLayerTintable *)l2 {
  JreOperatorRetainedAssign(&l2_, self, l2);
}
@synthesize l2 = l2_;
@synthesize total = total_;

- (id)initWithTripleplayGameScreenStack:(TripleplayGameScreenStack *)screens
                        withTBGameState:(TBGameState *)state {
  if ((self = [super initWithTripleplayGameScreenStack:screens withTBGameState:state])) {
    tint_ = [PlaynCoreColor rgbWithInt:125 withInt:255 withInt:0];
  }
  return self;
}

- (void)wasAdded {
  [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) addWithPlaynCoreLayer:[((id<PlaynCoreImageLayer>) [((id<PlaynCoreGraphics>) [TBGameScreen graphics]) createImageLayerWithPlaynCoreImage:[TBCanvasUtils createRectWithFloat:[self width] withFloat:[self height] withInt:[TripleplayUtilColors LIGHT_GRAY]]]) setDepthWithFloat:-1]];
  id<PlaynCoreImage> test = [TBCanvasUtils createCircleWithFloat:50 withInt:[TripleplayUtilColors PINK] withFloat:3 withInt:[TripleplayUtilColors GREEN]];
  JreOperatorRetainedAssign(&l1_, self, [((id<PlaynCoreGraphics>) [TBGameScreen graphics]) createImageLayerWithPlaynCoreImage:test]);
  (void) [((id<PlaynCoreImageLayer>) NIL_CHK(l1_)) setTintWithInt:tint_];
  [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) addWithPlaynCoreLayer:l1_];
  JreOperatorRetainedAssign(&l2_, self, [[[TBImageLayerTintable alloc] initWithPlaynCoreImage:test] autorelease]);
  [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) addWithPlaynCoreLayer:[((TBImageLayerTintable *) NIL_CHK(l2_)) layer]];
  [((TBImageLayerTintable *) NIL_CHK(l2_)) setTintWithInt:tint_];
  [((TBImageLayerTintable *) NIL_CHK(l2_)) setTxWithFloat:[self width] - [((TBImageLayerTintable *) NIL_CHK(l2_)) width]];
}

- (void)paintWithPlaynCoreUtilClock:(id<PlaynCoreUtilClock>)clock {
  total_ += [((id<PlaynCoreUtilClock>) NIL_CHK(clock)) dt];
  float alpha = (float) [JavaLangMath cosWithDouble:total_ / 1000.0f * JavaLangMath_PI] / 2 + 0.5f;
  (void) [((id<PlaynCoreImageLayer>) NIL_CHK(l1_)) setTintWithInt:[TripleplayUtilColors blendWithInt:[TripleplayUtilColors WHITE] withInt:tint_ withFloat:1 - alpha]];
  [((TBImageLayerTintable *) NIL_CHK(l2_)) setTintWithInt:[TripleplayUtilColors WHITE] withInt:tint_ withFloat:alpha];
}

- (void)dealloc {
  JreOperatorRetainedAssign(&l2_, self, nil);
  JreOperatorRetainedAssign(&l1_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TBTestScreen *typedCopy = (TBTestScreen *) copy;
  typedCopy.tint = tint_;
  typedCopy.l1 = l1_;
  typedCopy.l2 = l2_;
  typedCopy.total = total_;
}

@end
