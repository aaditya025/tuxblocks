//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: tripleplay/ui/Scroller.java
//
//  Created by Thomas on 7/1/13.
//

#import "IOSClass.h"
#import "IOSObjectArray.h"
#import "java/lang/Float.h"
#import "java/lang/IllegalArgumentException.h"
#import "java/lang/Integer.h"
#import "java/lang/Math.h"
#import "java/util/ArrayList.h"
#import "java/util/Iterator.h"
#import "java/util/List.h"
#import "playn/core/Asserts.h"
#import "playn/core/Color.h"
#import "playn/core/Connection.h"
#import "playn/core/Graphics.h"
#import "playn/core/GroupLayer.h"
#import "playn/core/ImmediateLayer.h"
#import "playn/core/Layer.h"
#import "playn/core/Mouse.h"
#import "playn/core/PlayN.h"
#import "playn/core/Pointer.h"
#import "playn/core/Surface.h"
#import "pythagoras/f/Dimension.h"
#import "pythagoras/f/IDimension.h"
#import "pythagoras/f/IPoint.h"
#import "pythagoras/f/Point.h"
#import "pythagoras/f/Rectangle.h"
#import "react/Signal.h"
#import "tripleplay/ui/Element.h"
#import "tripleplay/ui/Elements.h"
#import "tripleplay/ui/Group.h"
#import "tripleplay/ui/Interface.h"
#import "tripleplay/ui/Layout.h"
#import "tripleplay/ui/Root.h"
#import "tripleplay/ui/Style.h"
#import "tripleplay/ui/layout/AxisLayout.h"
#import "tripleplay/ui/util/XYFlicker.h"
#import "tripleplay/util/Colors.h"
#import "tripleplay/util/Layers.h"

@implementation TripleplayUiScroller

static TripleplayUiStyle * TripleplayUiScroller_BAR_SIZE_;
static TripleplayUiStyle * TripleplayUiScroller_BAR_COLOR_;
static TripleplayUiStyle * TripleplayUiScroller_BAR_RENDERER_;

- (TripleplayUiElement *)content {
  return content_;
}
- (void)setContent:(TripleplayUiElement *)content {
  JreOperatorRetainedAssign(&content_, self, content);
}
@synthesize content = content_;
- (TripleplayUiScroller_Bar *)hbar {
  return hbar_;
}
- (void)setHbar:(TripleplayUiScroller_Bar *)hbar {
  JreOperatorRetainedAssign(&hbar_, self, hbar);
}
@synthesize hbar = hbar_;
- (TripleplayUiScroller_Bar *)vbar {
  return vbar_;
}
- (void)setVbar:(TripleplayUiScroller_Bar *)vbar {
  JreOperatorRetainedAssign(&vbar_, self, vbar);
}
@synthesize vbar = vbar_;
- (TripleplayUiGroup *)_scroller {
  return _scroller_;
}
- (void)set_scroller:(TripleplayUiGroup *)_scroller {
  JreOperatorRetainedAssign(&_scroller_, self, _scroller);
}
@synthesize _scroller = _scroller_;
- (TripleplayUiUtilXYFlicker *)_flicker {
  return _flicker_;
}
- (void)set_flicker:(TripleplayUiUtilXYFlicker *)_flicker {
  JreOperatorRetainedAssign(&_flicker_, self, _flicker);
}
@synthesize _flicker = _flicker_;
- (id<TripleplayUiScroller_Clippable>)_clippable {
  return _clippable_;
}
- (void)set_clippable:(id<TripleplayUiScroller_Clippable>)_clippable {
  JreOperatorRetainedAssign(&_clippable_, self, _clippable);
}
@synthesize _clippable = _clippable_;
- (PythagorasFDimension *)_contentSize {
  return _contentSize_;
}
- (void)set_contentSize:(PythagorasFDimension *)_contentSize {
  JreOperatorRetainedAssign(&_contentSize_, self, _contentSize);
}
@synthesize _contentSize = _contentSize_;
- (id<TripleplayUiInterface_TaskHandle>)_updater {
  return _updater_;
}
- (void)set_updater:(id<TripleplayUiInterface_TaskHandle>)_updater {
  JreOperatorRetainedAssign(&_updater_, self, _updater);
}
@synthesize _updater = _updater_;
- (id<PlaynCoreLayer>)_barLayer {
  return _barLayer_;
}
- (void)set_barLayer:(id<PlaynCoreLayer>)_barLayer {
  JreOperatorRetainedAssign(&_barLayer_, self, _barLayer);
}
@synthesize _barLayer = _barLayer_;
- (PythagorasFPoint *)_queuedScroll {
  return _queuedScroll_;
}
- (void)set_queuedScroll:(PythagorasFPoint *)_queuedScroll {
  JreOperatorRetainedAssign(&_queuedScroll_, self, _queuedScroll);
}
@synthesize _queuedScroll = _queuedScroll_;
@synthesize _barAlpha = _barAlpha_;
- (id<TripleplayUiScroller_BarRenderer>)_barRenderer {
  return _barRenderer_;
}
- (void)set_barRenderer:(id<TripleplayUiScroller_BarRenderer>)_barRenderer {
  JreOperatorRetainedAssign(&_barRenderer_, self, _barRenderer);
}
@synthesize _barRenderer = _barRenderer_;
- (id<JavaUtilList>)_lners {
  return _lners_;
}
- (void)set_lners:(id<JavaUtilList>)_lners {
  JreOperatorRetainedAssign(&_lners_, self, _lners);
}
@synthesize _lners = _lners_;

+ (TripleplayUiStyle *)BAR_SIZE {
  return TripleplayUiScroller_BAR_SIZE_;
}

+ (TripleplayUiStyle *)BAR_COLOR {
  return TripleplayUiScroller_BAR_COLOR_;
}

+ (TripleplayUiStyle *)BAR_RENDERER {
  return TripleplayUiScroller_BAR_RENDERER_;
}

+ (float)BAR_FADE_SPEED {
  return TripleplayUiScroller_BAR_FADE_SPEED;
}

+ (float)BAR_TOP_ALPHA {
  return TripleplayUiScroller_BAR_TOP_ALPHA;
}

+ (TripleplayUiScroller *)findScrollParentWithTripleplayUiElement:(TripleplayUiElement *)elem {
  for (; elem != nil && !([elem isKindOfClass:[TripleplayUiScroller class]]); elem = [((TripleplayUiElement *) NIL_CHK(elem)) parent]) {
  }
  return (TripleplayUiScroller *) elem;
}

+ (BOOL)makeVisibleWithTripleplayUiElement:(TripleplayUiElement *)elem {
  TripleplayUiScroller *scroller = [TripleplayUiScroller findScrollParentWithTripleplayUiElement:elem];
  if (scroller == nil) return NO;
  if (![((TripleplayUiScroller *) NIL_CHK(scroller)) isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VALID]]) {
    [PlaynCorePlayN invokeLaterWithJavaLangRunnable:[[[TripleplayUiScroller_$2 alloc] initWithTripleplayUiElement:elem] autorelease]];
    return YES;
  }
  PythagorasFPoint *offset = [TripleplayUtilLayers transformWithPythagorasFIPoint:[[[PythagorasFPoint alloc] initWithFloat:0 withFloat:0] autorelease] withPlaynCoreLayer:((TripleplayUiElement *) NIL_CHK(elem)).layer withPlaynCoreLayer:((TripleplayUiElement *) NIL_CHK(scroller.content)).layer];
  [((TripleplayUiScroller *) NIL_CHK(scroller)) scrollWithFloat:((PythagorasFPoint *) NIL_CHK(offset)).x_ withFloat:((PythagorasFPoint *) NIL_CHK(offset)).y_];
  return YES;
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)content {
  if ((self = [super initWithTripleplayUiLayout:[[[[TripleplayUiLayoutAxisLayout horizontal] stretchByDefault] offStretch] gapWithInt:0]])) {
    JreOperatorRetainedAssign(&hbar_, self, [self createBar]);
    JreOperatorRetainedAssign(&vbar_, self, [self createBar]);
    JreOperatorRetainedAssign(&_scroller_, self, [[[TripleplayUiScroller_$6 alloc] initWithTripleplayUiScroller_ScrollLayout:[[[TripleplayUiScroller_ScrollLayout alloc] initWithTripleplayUiScroller:self] autorelease]] autorelease]);
    JreOperatorRetainedAssign(&_contentSize_, self, [[[PythagorasFDimension alloc] init] autorelease]);
    (void) [self addWithTripleplayUiElementArray:[IOSObjectArray arrayWithType:[IOSClass classWithClass:[TripleplayUiElement class]] count:1, ((TripleplayUiGroup *) [((TripleplayUiGroup *) NIL_CHK(_scroller_)) addWithTripleplayUiElementArray:[IOSObjectArray arrayWithType:[IOSClass classWithClass:[TripleplayUiElement class]] count:1, self.content = content ]]) ]];
    if ([content conformsToProtocol: @protocol(TripleplayUiScroller_Clippable)]) {
      JreOperatorRetainedAssign(&_clippable_, self, (id<TripleplayUiScroller_Clippable>) content);
    }
    else {
      JreOperatorRetainedAssign(&_clippable_, self, [[[TripleplayUiScroller_$3 alloc] initWithTripleplayUiScroller:self] autorelease]);
    }
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum HIT_ABSORB] withBOOL:YES];
    (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) addListenerWithPlaynCoreMouse_LayerListener:[[[TripleplayUiScroller_$4 alloc] initWithTripleplayUiScroller:self] autorelease]];
    (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) addListenerWithPlaynCorePointer_Listener:JreOperatorRetainedAssign(&_flicker_, self, [[[TripleplayUiUtilXYFlicker alloc] init] autorelease])];
  }
  return self;
}

- (TripleplayUiScroller *)setBehaviorWithTripleplayUiScroller_BehaviorEnum:(TripleplayUiScroller_BehaviorEnum *)beh {
  ((TripleplayUiScroller_Bar *) NIL_CHK(hbar_))._on = [((TripleplayUiScroller_BehaviorEnum *) NIL_CHK(beh)) hasHorizontal];
  ((TripleplayUiScroller_Bar *) NIL_CHK(vbar_))._on = [((TripleplayUiScroller_BehaviorEnum *) NIL_CHK(beh)) hasVertical];
  [self invalidate];
  return self;
}

- (void)addListenerWithTripleplayUiScroller_Listener:(id<TripleplayUiScroller_Listener>)lner {
  if (_lners_ == nil) JreOperatorRetainedAssign(&_lners_, self, [[[JavaUtilArrayList alloc] init] autorelease]);
  [((id<JavaUtilList>) NIL_CHK(_lners_)) addWithId:lner];
}

- (void)removeListenerWithTripleplayUiScroller_Listener:(id<TripleplayUiScroller_Listener>)lner {
  if (_lners_ != nil) [_lners_ removeWithId:lner];
}

- (float)xpos {
  return ((TripleplayUiScroller_Bar *) NIL_CHK(hbar_))._cpos;
}

- (float)ypos {
  return ((TripleplayUiScroller_Bar *) NIL_CHK(vbar_))._cpos;
}

- (void)scrollXWithFloat:(float)x {
  [self scrollWithFloat:x withFloat:[self ypos]];
}

- (void)scrollYWithFloat:(float)y {
  [self scrollWithFloat:[self xpos] withFloat:y];
}

- (void)scrollWithFloat:(float)x
              withFloat:(float)y {
  x = [JavaLangMath maxWithFloat:0 withFloat:[JavaLangMath minWithFloat:x withFloat:((TripleplayUiScroller_Bar *) NIL_CHK(hbar_))._max]];
  y = [JavaLangMath maxWithFloat:0 withFloat:[JavaLangMath minWithFloat:y withFloat:((TripleplayUiScroller_Bar *) NIL_CHK(vbar_))._max]];
  [((TripleplayUiUtilXYFlicker *) NIL_CHK(_flicker_)) positionChangedWithFloat:x withFloat:y];
}

- (void)queueScrollWithFloat:(float)x
                   withFloat:(float)y {
  JreOperatorRetainedAssign(&_queuedScroll_, self, [[[PythagorasFPoint alloc] initWithFloat:x withFloat:y] autorelease]);
}

- (id<PythagorasFIDimension>)contentSize {
  return _contentSize_;
}

- (id<PythagorasFIDimension>)viewSize {
  return [((TripleplayUiGroup *) NIL_CHK(_scroller_)) size];
}

- (ReactSignal *)contentClicked {
  return ((TripleplayUiUtilXYFlicker *) NIL_CHK(_flicker_)).clicked;
}

- (TripleplayUiScroller *)addWithTripleplayUiElementArray:(IOSObjectArray *)children {
  [PlaynCoreAsserts checkStateWithBOOL:[self childCount] + (int) [((IOSObjectArray *) NIL_CHK(children)) count] == 1];
  return (TripleplayUiScroller *) [super addWithTripleplayUiElementArray:children];
}

- (TripleplayUiScroller *)addWithInt:(int)index
             withTripleplayUiElement:(TripleplayUiElement *)child {
  [PlaynCoreAsserts checkStateWithBOOL:[self childCount] == 0];
  return (TripleplayUiScroller *) [super addWithInt:index withTripleplayUiElement:child];
}

- (void)updateWithInt:(int)delta {
  [((TripleplayUiUtilXYFlicker *) NIL_CHK(_flicker_)) updateWithInt:delta];
  [self updateWithBOOL:NO];
  if (_barAlpha_ > 0) [self setBarAlphaWithFloat:_barAlpha_ - TripleplayUiScroller_BAR_FADE_SPEED * delta];
}

- (void)updateWithBOOL:(BOOL)force {
  id<PythagorasFIPoint> pos = [((TripleplayUiUtilXYFlicker *) NIL_CHK(_flicker_)) position];
  BOOL dx = [((TripleplayUiScroller_Bar *) NIL_CHK(hbar_)) setWithFloat:[((id<PythagorasFIPoint>) NIL_CHK(pos)) x]], dy = [((TripleplayUiScroller_Bar *) NIL_CHK(vbar_)) setWithFloat:[((id<PythagorasFIPoint>) NIL_CHK(pos)) y]];
  if (dx || dy || force) {
    [((id<TripleplayUiScroller_Clippable>) NIL_CHK(_clippable_)) setPositionWithFloat:-[((id<PythagorasFIPoint>) NIL_CHK(pos)) x] withFloat:-[((id<PythagorasFIPoint>) NIL_CHK(pos)) y]];
    if (!force) [self updateVisibility];
    [self firePositionChange];
    [self setBarAlphaWithFloat:TripleplayUiScroller_BAR_TOP_ALPHA];
  }
}

- (TripleplayUiScroller_Bar *)createBar {
  return [[[TripleplayUiScroller_Bar alloc] init] autorelease];
}

- (TripleplayUiElement_LayoutData *)createLayoutDataWithFloat:(float)hintX
                                                    withFloat:(float)hintY {
  return [[[TripleplayUiScroller_BarsLayoutData alloc] initWithTripleplayUiScroller:self] autorelease];
}

- (IOSClass *)getStyleClass {
  return [IOSClass classWithClass:[TripleplayUiScroller class]];
}

- (void)wasAdded {
  [super wasAdded];
  JreOperatorRetainedAssign(&_updater_, self, [[[self root] iface] addTaskWithTripleplayUiInterface_Task:[[[TripleplayUiScroller_$5 alloc] initWithTripleplayUiScroller:self] autorelease]]);
}

- (void)wasRemoved {
  [super wasRemoved];
  [((id<TripleplayUiInterface_TaskHandle>) NIL_CHK(_updater_)) remove];
}

- (void)updateVisibility {
  if (!([content_ isKindOfClass:[TripleplayUiElements class]])) {
    return;
  }
  float x = ((TripleplayUiScroller_Bar *) NIL_CHK(hbar_))._cpos, y = ((TripleplayUiScroller_Bar *) NIL_CHK(vbar_))._cpos, wid = ((TripleplayUiScroller_Bar *) NIL_CHK(hbar_))._size, hei = ((TripleplayUiScroller_Bar *) NIL_CHK(vbar_))._size;
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [(TripleplayUiElements *) content_ iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      TripleplayUiElement *child = ((TripleplayUiElement *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      id<PythagorasFIDimension> size = [((TripleplayUiElement *) NIL_CHK(child)) size];
      if ([((TripleplayUiElement *) NIL_CHK(child)) isVisible]) (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(child.layer)) setVisibleWithBOOL:[((TripleplayUiElement *) NIL_CHK(child)) x] < x + wid && [((TripleplayUiElement *) NIL_CHK(child)) x] + [((id<PythagorasFIDimension>) NIL_CHK(size)) width] > x && [((TripleplayUiElement *) NIL_CHK(child)) y] < y + hei && [((TripleplayUiElement *) NIL_CHK(child)) y] + [((id<PythagorasFIDimension>) NIL_CHK(size)) height] > y];
    }
  }
}

- (void)fireViewChanged {
  if (_lners_ == nil) return;
  id<PythagorasFIDimension> csize = [self contentSize], ssize = [self viewSize];
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_lners_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      id<TripleplayUiScroller_Listener> lner = ((id<TripleplayUiScroller_Listener>) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      [((id<TripleplayUiScroller_Listener>) NIL_CHK(lner)) viewChangedWithPythagorasFIDimension:csize withPythagorasFIDimension:ssize];
    }
  }
}

- (void)firePositionChange {
  if (_lners_ == nil) return;
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_lners_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      id<TripleplayUiScroller_Listener> lner = ((id<TripleplayUiScroller_Listener>) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      [((id<TripleplayUiScroller_Listener>) NIL_CHK(lner)) positionChangedWithFloat:[self xpos] withFloat:[self ypos]];
    }
  }
}

- (void)setBarAlphaWithFloat:(float)alpha {
  _barAlpha_ = [JavaLangMath minWithFloat:TripleplayUiScroller_BAR_TOP_ALPHA withFloat:[JavaLangMath maxWithFloat:0 withFloat:alpha]];
  if (_barLayer_ != nil) {
    (void) [_barLayer_ setAlphaWithFloat:[JavaLangMath minWithFloat:_barAlpha_ withFloat:1]];
    (void) [_barLayer_ setVisibleWithBOOL:_barAlpha_ > 0];
  }
}

+ (void)initialize {
  if (self == [TripleplayUiScroller class]) {
    JreOperatorRetainedAssign(&TripleplayUiScroller_BAR_SIZE_, self, ((TripleplayUiStyle *) [TripleplayUiStyle newStyleWithBOOL:YES withId:[JavaLangFloat valueOfWithFloat:5.0f]]));
    JreOperatorRetainedAssign(&TripleplayUiScroller_BAR_COLOR_, self, ((TripleplayUiStyle *) [TripleplayUiStyle newStyleWithBOOL:YES withId:[JavaLangInteger valueOfWithInt:[PlaynCoreColor withAlphaWithInt:[TripleplayUtilColors BLACK] withInt:128]]]));
    JreOperatorRetainedAssign(&TripleplayUiScroller_BAR_RENDERER_, self, ((TripleplayUiStyle *) [TripleplayUiStyle newStyleWithBOOL:NO withId:[[[TripleplayUiScroller_$1 alloc] init] autorelease]]));
  }
}

- (void)dealloc {
  JreOperatorRetainedAssign(&_lners_, self, nil);
  JreOperatorRetainedAssign(&_barRenderer_, self, nil);
  JreOperatorRetainedAssign(&_queuedScroll_, self, nil);
  JreOperatorRetainedAssign(&_barLayer_, self, nil);
  JreOperatorRetainedAssign(&_updater_, self, nil);
  JreOperatorRetainedAssign(&_contentSize_, self, nil);
  JreOperatorRetainedAssign(&_clippable_, self, nil);
  JreOperatorRetainedAssign(&_flicker_, self, nil);
  JreOperatorRetainedAssign(&_scroller_, self, nil);
  JreOperatorRetainedAssign(&vbar_, self, nil);
  JreOperatorRetainedAssign(&hbar_, self, nil);
  JreOperatorRetainedAssign(&content_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller *typedCopy = (TripleplayUiScroller *) copy;
  typedCopy.content = content_;
  typedCopy.hbar = hbar_;
  typedCopy.vbar = vbar_;
  typedCopy._scroller = _scroller_;
  typedCopy._flicker = _flicker_;
  typedCopy._clippable = _clippable_;
  typedCopy._contentSize = _contentSize_;
  typedCopy._updater = _updater_;
  typedCopy._barLayer = _barLayer_;
  typedCopy._queuedScroll = _queuedScroll_;
  typedCopy._barAlpha = _barAlpha_;
  typedCopy._barRenderer = _barRenderer_;
  typedCopy._lners = _lners_;
}

@end

static TripleplayUiScroller_BehaviorEnum *TripleplayUiScroller_BehaviorEnum_HORIZONTAL;
static TripleplayUiScroller_BehaviorEnum *TripleplayUiScroller_BehaviorEnum_VERTICAL;
static TripleplayUiScroller_BehaviorEnum *TripleplayUiScroller_BehaviorEnum_BOTH;
IOSObjectArray *TripleplayUiScroller_BehaviorEnum_values;

@implementation TripleplayUiScroller_BehaviorEnum

+ (TripleplayUiScroller_BehaviorEnum *)HORIZONTAL {
  return TripleplayUiScroller_BehaviorEnum_HORIZONTAL;
}
+ (TripleplayUiScroller_BehaviorEnum *)VERTICAL {
  return TripleplayUiScroller_BehaviorEnum_VERTICAL;
}
+ (TripleplayUiScroller_BehaviorEnum *)BOTH {
  return TripleplayUiScroller_BehaviorEnum_BOTH;
}

- (id)copyWithZone:(NSZone *)zone {
  return [self retain];
}

- (BOOL)hasHorizontal {
  return self == TripleplayUiScroller_BehaviorEnum_HORIZONTAL || self == TripleplayUiScroller_BehaviorEnum_BOTH;
}

- (BOOL)hasVertical {
  return self == TripleplayUiScroller_BehaviorEnum_VERTICAL || self == TripleplayUiScroller_BehaviorEnum_BOTH;
}

- (id)initWithNSString:(NSString *)name withInt:(int)ordinal {
  return [super initWithNSString:name withInt:ordinal];
}

+ (void)initialize {
  if (self == [TripleplayUiScroller_BehaviorEnum class]) {
    TripleplayUiScroller_BehaviorEnum_HORIZONTAL = [[TripleplayUiScroller_BehaviorEnum alloc] initWithNSString:@"HORIZONTAL" withInt:0];
    TripleplayUiScroller_BehaviorEnum_VERTICAL = [[TripleplayUiScroller_BehaviorEnum alloc] initWithNSString:@"VERTICAL" withInt:1];
    TripleplayUiScroller_BehaviorEnum_BOTH = [[TripleplayUiScroller_BehaviorEnum alloc] initWithNSString:@"BOTH" withInt:2];
    TripleplayUiScroller_BehaviorEnum_values = [[IOSObjectArray alloc] initWithObjects:(id[]){ TripleplayUiScroller_BehaviorEnum_HORIZONTAL, TripleplayUiScroller_BehaviorEnum_VERTICAL, TripleplayUiScroller_BehaviorEnum_BOTH, nil } count:3 type:[IOSClass classWithClass:[TripleplayUiScroller_BehaviorEnum class]]];
  }
}

+ (IOSObjectArray *)values {
  return [IOSObjectArray arrayWithArray:TripleplayUiScroller_BehaviorEnum_values];
}

+ (TripleplayUiScroller_BehaviorEnum *)valueOfWithNSString:(NSString *)name {
  for (int i = 0; i < [TripleplayUiScroller_BehaviorEnum_values count]; i++) {
    TripleplayUiScroller_BehaviorEnum *e = [TripleplayUiScroller_BehaviorEnum_values objectAtIndex:i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:name] autorelease];
  return nil;
}

@end
@implementation TripleplayUiScroller_Bar

@synthesize _on = _on_;
@synthesize _size = _size_;
@synthesize _csize = _csize_;
@synthesize _pos = _pos_;
@synthesize _cpos = _cpos_;
@synthesize _extent = _extent_;
@synthesize _max = _max_;

- (float)max {
  return _max_;
}

- (BOOL)active {
  return _max_ != 0;
}

- (float)setRangeWithFloat:(float)viewSize
                 withFloat:(float)contentSize {
  _size_ = viewSize;
  _csize_ = contentSize;
  if (!_on_ || _size_ >= _csize_) {
    _max_ = _extent_ = _pos_ = _cpos_ = 0;
    return 0;
  }
  else {
    _max_ = _csize_ - _size_;
    _extent_ = _size_ * _size_ / _csize_;
    _pos_ = [JavaLangMath minWithFloat:_pos_ withFloat:_size_ - _extent_];
    _cpos_ = _pos_ / (_size_ - _extent_) * _max_;
    return _cpos_;
  }
}

- (BOOL)setWithFloat:(float)cpos {
  if (cpos == _cpos_) return NO;
  _cpos_ = cpos;
  _pos_ = _max_ == 0 ? 0 : cpos / _max_ * (_size_ - _extent_);
  return YES;
}

- (float)getContentSize {
  return _on_ ? _csize_ : _size_;
}

- (float)extendHintWithFloat:(float)hint {
  return _on_ ? 100000 : hint;
}

- (id)init {
  if ((self = [super init])) {
    _on_ = YES;
  }
  return self;
}

- (void)dealloc {
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_Bar *typedCopy = (TripleplayUiScroller_Bar *) copy;
  typedCopy._on = _on_;
  typedCopy._size = _size_;
  typedCopy._csize = _csize_;
  typedCopy._pos = _pos_;
  typedCopy._cpos = _cpos_;
  typedCopy._extent = _extent_;
  typedCopy._max = _max_;
}

@end
@implementation TripleplayUiScroller_BarsLayoutData

- (TripleplayUiScroller *)this$3 {
  return this$3_;
}
- (void)setThis$3:(TripleplayUiScroller *)this$3 {
  JreOperatorRetainedAssign(&this$3_, self, this$3);
}
@synthesize this$3 = this$3_;
@synthesize barColor = barColor_;
@synthesize barSize = barSize_;
- (id<TripleplayUiScroller_BarRenderer>)barRenderer {
  return barRenderer_;
}
- (void)setBarRenderer:(id<TripleplayUiScroller_BarRenderer>)barRenderer {
  JreOperatorRetainedAssign(&barRenderer_, self, barRenderer);
}
@synthesize barRenderer = barRenderer_;

- (void)layoutWithFloat:(float)left
              withFloat:(float)top
              withFloat:(float)width
              withFloat:(float)height {
  [super layoutWithFloat:left withFloat:top withFloat:width withFloat:height];
  [this$3_ updateVisibility];
  id<PlaynCoreImmediateLayer> bars = nil;
  if (barRenderer_ != nil && ([((TripleplayUiScroller_Bar *) NIL_CHK(this$3_.hbar)) active] || [((TripleplayUiScroller_Bar *) NIL_CHK(this$3_.vbar)) active])) {
    bars = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createImmediateLayerWithPlaynCoreImmediateLayer_Renderer:[[[TripleplayUiScroller_BarsLayoutData_$1 alloc] initWithTripleplayUiScroller_BarsLayoutData:self withFloat:height withFloat:width] autorelease]];
  }
  if (this$3_._barLayer != nil) [this$3_._barLayer destroy];
  if ((this$3_._barLayer = bars) != nil) [((id<PlaynCoreGroupLayer>) NIL_CHK(this$3_._scroller.layer)) addWithPlaynCoreLayer:[((id<PlaynCoreLayer>) [((id<PlaynCoreLayer>) NIL_CHK(this$3_._barLayer)) setDepthWithFloat:1]) setAlphaWithFloat:this$3_._barAlpha]];
}

- (id)initWithTripleplayUiScroller:(TripleplayUiScroller *)outer$ {
  if ((self = [super initWithTripleplayUiElements:outer$])) {
    JreOperatorRetainedAssign(&this$3_, self, outer$);
    barColor_ = [((JavaLangInteger *) [outer$ resolveStyleWithTripleplayUiStyle:[TripleplayUiScroller BAR_COLOR]]) intValue];
    barSize_ = [((JavaLangFloat *) [outer$ resolveStyleWithTripleplayUiStyle:[TripleplayUiScroller BAR_SIZE]]) floatValue];
    JreOperatorRetainedAssign(&barRenderer_, self, ((id<TripleplayUiScroller_BarRenderer>) [outer$ resolveStyleWithTripleplayUiStyle:[TripleplayUiScroller BAR_RENDERER]]));
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&barRenderer_, self, nil);
  JreOperatorRetainedAssign(&this$3_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_BarsLayoutData *typedCopy = (TripleplayUiScroller_BarsLayoutData *) copy;
  typedCopy.this$3 = this$3_;
  typedCopy.barColor = barColor_;
  typedCopy.barSize = barSize_;
  typedCopy.barRenderer = barRenderer_;
}

@end
@implementation TripleplayUiScroller_BarsLayoutData_$1

- (TripleplayUiScroller_BarsLayoutData *)this$0 {
  return this$0_;
}
- (void)setThis$0:(TripleplayUiScroller_BarsLayoutData *)this$0 {
  JreOperatorRetainedAssign(&this$0_, self, this$0);
}
@synthesize this$0 = this$0_;
- (PythagorasFRectangle *)area {
  return area_;
}
- (void)setArea:(PythagorasFRectangle *)area {
  JreOperatorRetainedAssign(&area_, self, area);
}
@synthesize area = area_;
@synthesize val$height = val$height_;
@synthesize val$width = val$width_;

- (void)renderWithPlaynCoreSurface:(id<PlaynCoreSurface>)surface {
  (void) [((id<PlaynCoreSurface>) NIL_CHK(surface)) save];
  (void) [((id<PlaynCoreSurface>) NIL_CHK(surface)) setFillColorWithInt:this$0_.barColor];
  if ([((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.this$3.hbar)) active]) {
    [((PythagorasFRectangle *) NIL_CHK(area_)) setBoundsWithFloat:((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.this$3.hbar))._pos withFloat:val$height_ - this$0_.barSize withFloat:((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.this$3.hbar))._extent withFloat:this$0_.barSize];
    [((id<TripleplayUiScroller_BarRenderer>) NIL_CHK(this$0_.barRenderer)) drawBarWithPlaynCoreSurface:surface withPythagorasFRectangle:area_];
  }
  if ([((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.this$3.vbar)) active]) {
    [((PythagorasFRectangle *) NIL_CHK(area_)) setBoundsWithFloat:val$width_ - this$0_.barSize withFloat:((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.this$3.vbar))._pos withFloat:this$0_.barSize withFloat:((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.this$3.vbar))._extent];
    [((id<TripleplayUiScroller_BarRenderer>) NIL_CHK(this$0_.barRenderer)) drawBarWithPlaynCoreSurface:surface withPythagorasFRectangle:area_];
  }
  (void) [((id<PlaynCoreSurface>) NIL_CHK(surface)) restore];
}

- (id)initWithTripleplayUiScroller_BarsLayoutData:(TripleplayUiScroller_BarsLayoutData *)outer$
                                        withFloat:(float)capture$0
                                        withFloat:(float)capture$1 {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&this$0_, self, outer$);
    val$height_ = capture$0;
    val$width_ = capture$1;
    JreOperatorRetainedAssign(&area_, self, [[[PythagorasFRectangle alloc] init] autorelease]);
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&area_, self, nil);
  JreOperatorRetainedAssign(&this$0_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_BarsLayoutData_$1 *typedCopy = (TripleplayUiScroller_BarsLayoutData_$1 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.area = area_;
  typedCopy.val$height = val$height_;
  typedCopy.val$width = val$width_;
}

@end
@implementation TripleplayUiScroller_ScrollLayout

- (TripleplayUiScroller *)this$0 {
  return this$0_;
}
- (void)setThis$0:(TripleplayUiScroller *)this$0 {
  JreOperatorRetainedAssign(&this$0_, self, this$0);
}
@synthesize this$0 = this$0_;

- (PythagorasFDimension *)computeSizeWithTripleplayUiElements:(TripleplayUiElements *)elems
                                                    withFloat:(float)hintX
                                                    withFloat:(float)hintY {
  [PlaynCoreAsserts checkArgumentWithBOOL:[((TripleplayUiElements *) NIL_CHK(elems)) childCount] == 1 && [((TripleplayUiElements *) NIL_CHK(elems)) childAtWithInt:0] == this$0_.content];
  [((PythagorasFDimension *) NIL_CHK(this$0_._contentSize)) setSizeWithPythagorasFIDimension:[self preferredSizeWithTripleplayUiElement:[((TripleplayUiElements *) NIL_CHK(elems)) childAtWithInt:0] withFloat:[((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.hbar)) extendHintWithFloat:hintX] withFloat:[((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.vbar)) extendHintWithFloat:hintY]]];
  return [[[PythagorasFDimension alloc] initWithPythagorasFIDimension:this$0_._contentSize] autorelease];
}

- (void)layoutWithTripleplayUiElements:(TripleplayUiElements *)elems
                             withFloat:(float)left
                             withFloat:(float)top
                             withFloat:(float)width
                             withFloat:(float)height {
  [PlaynCoreAsserts checkArgumentWithBOOL:[((TripleplayUiElements *) NIL_CHK(elems)) childCount] == 1 && [((TripleplayUiElements *) NIL_CHK(elems)) childAtWithInt:0] == this$0_.content];
  left = [((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.hbar)) setRangeWithFloat:width withFloat:((PythagorasFDimension *) NIL_CHK(this$0_._contentSize)).width_];
  top = [((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.vbar)) setRangeWithFloat:height withFloat:((PythagorasFDimension *) NIL_CHK(this$0_._contentSize)).height_];
  [self setBoundsWithTripleplayUiElement:this$0_.content withFloat:0 withFloat:0 withFloat:[((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.hbar)) getContentSize] withFloat:[((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.vbar)) getContentSize]];
  [((id<TripleplayUiScroller_Clippable>) NIL_CHK(this$0_._clippable)) setViewAreaWithFloat:width withFloat:height];
  [((id<PlaynCoreGroupLayer_Clipped>) ((TripleplayUiGroup *) NIL_CHK(this$0_._scroller)).layer) setSizeWithFloat:width withFloat:height];
  [((TripleplayUiUtilXYFlicker *) NIL_CHK(this$0_._flicker)) resetWithFloat:[((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.hbar)) max] withFloat:[((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.vbar)) max]];
  if (this$0_._queuedScroll != nil) {
    [this$0_ scrollWithFloat:this$0_._queuedScroll.x_ withFloat:this$0_._queuedScroll.y_];
    this$0_._queuedScroll = nil;
  }
  else {
    [this$0_ scrollWithFloat:left withFloat:top];
  }
  [this$0_ updateWithBOOL:YES];
  [this$0_ fireViewChanged];
}

- (id)initWithTripleplayUiScroller:(TripleplayUiScroller *)outer$ {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&this$0_, self, outer$);
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&this$0_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_ScrollLayout *typedCopy = (TripleplayUiScroller_ScrollLayout *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiScroller_$1

- (void)drawBarWithPlaynCoreSurface:(id<PlaynCoreSurface>)surface
           withPythagorasFRectangle:(PythagorasFRectangle *)area {
  (void) [((id<PlaynCoreSurface>) NIL_CHK(surface)) fillRectWithFloat:((PythagorasFRectangle *) NIL_CHK(area)).x_ withFloat:((PythagorasFRectangle *) NIL_CHK(area)).y_ withFloat:((PythagorasFRectangle *) NIL_CHK(area)).width_ withFloat:((PythagorasFRectangle *) NIL_CHK(area)).height_];
}

- (id)init {
  return [super init];
}

- (void)dealloc {
  [super dealloc];
}

@end
@implementation TripleplayUiScroller_$2

- (TripleplayUiElement *)val$elem {
  return val$elem_;
}
- (void)setVal$elem:(TripleplayUiElement *)val$elem {
  JreOperatorRetainedAssign(&val$elem_, self, val$elem);
}
@synthesize val$elem = val$elem_;

- (void)run {
  [TripleplayUiScroller makeVisibleWithTripleplayUiElement:val$elem_];
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)capture$0 {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&val$elem_, self, capture$0);
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&val$elem_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_$2 *typedCopy = (TripleplayUiScroller_$2 *) copy;
  typedCopy.val$elem = val$elem_;
}

@end
@implementation TripleplayUiScroller_$3

- (TripleplayUiScroller *)this$0 {
  return this$0_;
}
- (void)setThis$0:(TripleplayUiScroller *)this$0 {
  JreOperatorRetainedAssign(&this$0_, self, this$0);
}
@synthesize this$0 = this$0_;

- (void)setViewAreaWithFloat:(float)width
                   withFloat:(float)height {
}

- (void)setPositionWithFloat:(float)x
                   withFloat:(float)y {
  (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(this$0_.content.layer)) setTranslationWithFloat:x withFloat:y];
}

- (id)initWithTripleplayUiScroller:(TripleplayUiScroller *)outer$ {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&this$0_, self, outer$);
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&this$0_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_$3 *typedCopy = (TripleplayUiScroller_$3 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiScroller_$4

- (TripleplayUiScroller *)this$0 {
  return this$0_;
}
- (void)setThis$0:(TripleplayUiScroller *)this$0 {
  JreOperatorRetainedAssign(&this$0_, self, this$0);
}
@synthesize this$0 = this$0_;

- (void)onMouseWheelScrollWithPlaynCoreMouse_WheelEvent:(id<PlaynCoreMouse_WheelEvent>)event {
  float delta = [((id<PlaynCoreMouse_WheelEvent>) NIL_CHK(event)) velocity] * .25f;
  if ([((TripleplayUiScroller_Bar *) NIL_CHK(this$0_.vbar)) active]) [this$0_ scrollYWithFloat:[this$0_ ypos] + (int) (delta * [((id<PythagorasFIDimension>) [this$0_ viewSize]) height])];
  else [this$0_ scrollXWithFloat:[this$0_ xpos] + (int) (delta * [((id<PythagorasFIDimension>) [this$0_ viewSize]) width])];
}

- (id)initWithTripleplayUiScroller:(TripleplayUiScroller *)outer$ {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&this$0_, self, outer$);
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&this$0_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_$4 *typedCopy = (TripleplayUiScroller_$4 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiScroller_$5

- (TripleplayUiScroller *)this$0 {
  return this$0_;
}
- (void)setThis$0:(TripleplayUiScroller *)this$0 {
  JreOperatorRetainedAssign(&this$0_, self, this$0);
}
@synthesize this$0 = this$0_;

- (void)updateWithInt:(int)delta {
  [this$0_ updateWithInt:delta];
}

- (id)initWithTripleplayUiScroller:(TripleplayUiScroller *)outer$ {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&this$0_, self, outer$);
  }
  return self;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&this$0_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiScroller_$5 *typedCopy = (TripleplayUiScroller_$5 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiScroller_$6

- (id<PlaynCoreGroupLayer>)createLayer {
  return [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createGroupLayerWithFloat:1 withFloat:1];
}

- (id)initWithTripleplayUiScroller_ScrollLayout:(TripleplayUiScroller_ScrollLayout *)arg$0 {
  return [super initWithTripleplayUiLayout:arg$0];
}

- (void)dealloc {
  [super dealloc];
}

@end
